<app-explore-filters
  class="not-mobile"
  (filtersChanged)="onFiltersChanged($event)"
></app-explore-filters>

<mat-expansion-panel class="mobile" expanded>
  <mat-expansion-panel-header>Search & Filters</mat-expansion-panel-header>
  <app-explore-filters (filtersChanged)="onFiltersChanged($event)"></app-explore-filters>
</mat-expansion-panel>

<section class="content">
  <div class="entity-grid" id="main">
    <app-grid-element
      *ngFor="let element of filteredResults"
      class="grid-item"
      [element]="element"
      [quickAddToCollectionMenu]="quickAddToCollectionMenu"
      (updateSelectedObject)="selectObjectId = $event"
    ></app-grid-element>
  </div>

  <div class="paginator-container">
    <mat-paginator
      [length]="paginatorLength"
      [pageSize]="paginatorPageSize"
      [pageSizeOptions]="[30]"
      (page)="changePage($event)"
      [pageIndex]="paginatorPageIndex"
    >
    </mat-paginator>
  </div>
</section>

<mat-menu #quickAddToCollectionMenu="matMenu">
  <button mat-menu-item (click)="openCompilationWizard(selectObjectId)">
    <mat-icon color="primary">create_new_folder</mat-icon>
    <span>New collection with this object</span>
  </button>
  <ng-container *ngIf="userCompilations.length > 0">
    <hr />
    <button
      *ngFor="let compilation of userCompilations"
      mat-menu-item
      (click)="quickAddToCompilation(compilation)"
    >
      <span>{{ compilation.name }}</span>
    </button>
  </ng-container>
</mat-menu>
